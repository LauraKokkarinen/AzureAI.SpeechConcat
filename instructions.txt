Convert the provided fantasy novel text into SSML markup according to the specifications below.

# Guidelines

1. **Base Storytelling Voice**:
   - Use the voice `zh-CN-XiaoxiaoMultilingualNeural` with the following properties:
     - Language: `en-UK`
     - Speaking Style: `story`
     - Style Degree: `2`

2. **Character-Specific Voices for Dialogue**:
   - Assign the following voices to direct speech by characters:
     - Reya: `en-US-JaneNeural`
     - Nemo: `en-US-JasonNeural`
     - Pepper: `en-US-SaraNeural` (Add a prosody pitch of 30% for her dialogue)
     - Nimble: `en-US-TonyNeural`
     - Lyria: `en-US-NancyNeural`
     - Seltern Obranch: `en-US-GuyNeural`
     - Grand Duke Ulder Ravengard: `en-US-DavisNeural`
     - Zevlor: `en-US-AndrewMultilingualNeural`
     - Pherria Jynks: `en-US-Emma:DragonHDLatestNeural`
   - For any characters not listed above, default to the base storytelling voice.

3. **Dialogue Customization**:
   - Use the `mstts:express-as` element inside individual `<voice>` tags to dynamically set one of the supported speaking styles below based on the context and emotion.
     - Only use these supported speaking styles for different voices:
       - en-US-JaneNeural, en-US-JasonNeural, en-US-SaraNeural, en-US-TonyNeural, en-US-NancyNeural, en-US-GuyNeural, en-US-DavisNeural: `default`, `angry`, `cheerful`, `excited`, `friendly`, `hopeful`, `sad`, `shouting`, `terrified`, `unfriendly`, `whispering`
       - en-US-AndrewMultilingualNeural: `default`, `empathetic`, `relieved`
       - en-US-Emma:DragonHDLatestNeural: `default`
     - The **style degree** for all speaking styles must be set to `2`.
   - Analyze the text to identify dialogue emotion and assign the most appropriate speech style available. Do not invent new styles.

4. **Special Elements**:
   - Replace three stars (***) in the text with a 500ms break (`<break time="500ms"/>`).
   - For Pepper's dialogue, always add `<prosody pitch="30%">` and close the tag accordingly.

5. **Structure and Syntax**:
   - Begin the output with `<speak>` element including properties:
     ```xml
     <speak xmlns="http://www.w3.org/2001/10/synthesis" xmlns:mstts="https://www.w3.org/2001/mstts"  version="1.0" xml:lang="en-US">
     ```
   - Use the **base storytelling voice** for non-dialogue text.
   - For dialogue, switch to character-specific voices and styles as applicable.
   - Return to the base storytelling voice after dialogue.

# Output Format

All text must be converted into SSML markup. The final format should include:

- `<speak>` element with proper namespaces.
- `<voice>` tags for narration and character-specific dialogue.
- Proper nesting of `<mstts:express-as>` for emotional style within dialogue.
- Use `<break>` elements as specified.
- Ensure the output conforms to Azure AI Speech SSML requirements and handles emotional tone contextually.

# Notes

- Handle emotional analysis of dialogue carefully to assign the correct speaking styles.
- Changes should only involve SSML markup—do not modify, add, or remove any story content.
- If any portion of the text is unclear or ambiguous, maintain the base narration style.

# Example

Below is an example transformation of text into SSML based on the guidelines:

### Input Text:
*"The night was dark and full of dread. 'Run!' shouted Nemo. 'We have to get away!' Pepper added, her voice trembling."*

### Output SSML:
```xml
<speak xmlns="http://www.w3.org/2001/10/synthesis" xmlns:mstts="https://www.w3.org/2001/mstts"  version="1.0" xml:lang="en-US">
  <voice name="zh-CN-XiaoxiaoMultilingualNeural" parameters="temperature=1.0">
    <mstts:express-as style="story" styledegree="2">
      The night was dark and full of dread.
    </mstts:express-as>
  </voice>
  <voice name="en-US-JasonNeural" parameters="temperature=1.0">
    <mstts:express-as style="shouting" styledegree="2">
      Run!
    </mstts:express-as>
  </voice>
  <voice name="en-US-SaraNeural" parameters="temperature=1.0">
    <prosody pitch="30%">
      <mstts:express-as style="terrified" styledegree="2">
        We have to get away!
      </mstts:express-as>
    </prosody>
  </voice>
</speak>
```

- Nemo's dialogue is marked with `shouting` as the context suggests urgency.  
- Pepper's dialogue includes a `<prosody>` element for pitch modification and uses `terrified` as the style due to her trembling voice.  
- Narration uses the base storytelling voice with `story` style.  

Repeat this approach consistently for the entire text.